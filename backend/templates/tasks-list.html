{% extends "base.html" %}

{% block content %}
<div class="items-container">
    <div class="items-header">
        <div>
            <a href="/" class="back-btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>
        </div>
        <div class="header-actions">
            <a href="{{ url_for('tasks:stats') }}" class="stats-btn">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            <a href="{{ url_for('tasks:create') }}" class="create-btn">+ –°–æ–∑–¥–∞—Ç—å</a>
        </div>
    </div>

    <div class="item-list">
        {% if not items %}
            <p>–ù–µ—Ç –∑–∞–¥–∞—á</p>
        {% else %}
            {% for task in items %}
            <div class="item-card">
                <h3>{{ task.name }}</h3>
                <p>–°—Ä–æ–∫: {{ task.deadline_datetime }}</p>
                <div class="item-actions">
                    <a href="{{ url_for('tasks:edit', task_id=task.id) }}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <form action="/tasks/{{ task.id }}/delete{% if request.query_params %}?{{ request.query_params }}{% endif %}" method="post" style="display:inline;">
                    <button type="submit">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
                </div>
            </div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="pagination">
        {% if page > 1 %}
            <a href="?page={{ page - 1 }}">‚Üê –ù–∞–∑–∞–¥</a>
        {% endif %}
        
        {% for p in range(1, pages + 1) %}
            {% if p == page %}
                <span class="current-page">{{ p }}</span>
            {% else %}
                <a href="?page={{ p }}">{{ p }}</a>
            {% endif %}
        {% endfor %}
        
        {% if page < pages %}
            <a href="?page={{ page + 1 }}">–í–ø–µ—Ä–µ–¥ ‚Üí</a>
        {% endif %}
    </div>
</div>
{% endblock %}