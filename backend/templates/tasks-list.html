{% extends "base.html" %}

{% block content %}
<div class="tasks-container">
    <div class="tasks-header">
        <h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>
        <div class="header-actions">
            <a href="/stats" class="stats-btn">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            <a href="/tasks/create" class="create-btn">+ –°–æ–∑–¥–∞—Ç—å</a>
        </div>
    </div>

    <div class="task-list">
        {% if not items %}
            <p>–ù–µ—Ç –∑–∞–¥–∞—á</p>
        {% else %}
            {% for task in items %}
            <div class="task-card">
                <h3>{{ task.name }}</h3>
                <p>–°—Ä–æ–∫: {{ task.deadline_datetime }}</p>
                <div class="task-actions">
                    <a href="/tasks/{{ task.id }}/edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form action="/tasks/{{ task.id }}/delete" method="post" style="display:inline;">
                        <button type="submit">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="pagination">
        {% if page > 1 %}
            <a href="?page={{ page - 1 }}">‚Üê –ù–∞–∑–∞–¥</a>
        {% endif %}
        
        {% for p in range(1, pages + 1) %}
            {% if p == page %}
                <span class="current-page">{{ p }}</span>
            {% else %}
                <a href="?page={{ p }}">{{ p }}</a>
            {% endif %}
        {% endfor %}
        
        {% if page < pages %}
            <a href="?page={{ page + 1 }}">–í–ø–µ—Ä–µ–¥ ‚Üí</a>
        {% endif %}
    </div>
</div>
{% endblock %}